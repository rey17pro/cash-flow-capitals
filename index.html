<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CashFlow Capitals</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#f8fafc; --card:#ffffff; --text:#0f172a;
  --primary:#2563eb; --accent:#7c3aed;
}
body.dark{
  --bg:#020617; --card:#0f172a; --text:#e5e7eb;
}
*{box-sizing:border-box;font-family:Inter,system-ui}
body{margin:0;background:var(--bg);color:var(--text)}
header{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:white;padding:20px;text-align:center
}
.container{max-width:520px;margin:auto;padding:16px}
.card{
  background:var(--card);border-radius:14px;
  padding:16px;margin-bottom:16px;
  box-shadow:0 6px 20px rgba(0,0,0,.08)
}
button,input,select{
  width:100%;padding:12px;margin-top:8px;
  border-radius:10px;border:1px solid #94a3b8
}
button{
  background:var(--primary);color:white;
  border:none;font-weight:600;cursor:pointer
}
button.danger{background:#dc2626}
.stat{display:flex;justify-content:space-between;margin-top:6px}
.tip{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:white;padding:14px;border-radius:12px
}
table{
  width:100%;border-collapse:collapse;margin-top:10px
}
th,td{
  padding:8px;border-bottom:1px solid #cbd5f5;
  text-align:left
}
th{font-weight:600}
</style>
</head>

<body>
<header>
<h1>ðŸ’° CashFlow Capitals</h1>
<p>Simple â€¢ Smart â€¢ Competition Ready</p>
</header>

<div class="container">

<div class="card">
<button onclick="toggleDark()">ðŸŒ“ Toggle Dark Mode</button>
</div>

<div class="card">
<h2>Monthly Income</h2>
<input id="income" type="number" placeholder="Enter income">
<button onclick="saveIncome()">Save</button>
</div>

<div class="card">
<h2>Dashboard</h2>
<div class="stat"><span>Balance</span><b>â‚¹<span id="balance">0</span></b></div>
<div class="stat"><span>Daily Limit</span><b>â‚¹<span id="daily">0</span></b></div>
</div>

<div class="card">
<h2>Add Expense</h2>
<input id="amount" type="number" placeholder="Amount">
<select id="category">
  <option>Food</option>
  <option>Shopping</option>
  <option>Entertainment</option>
</select>
<button onclick="addExpense()">Add Expense</button>
</div>

<div class="card">
<h2>Spending Chart</h2>
<canvas id="chart"></canvas>
</div>

<div class="card">
<h2>ðŸ“Š Recommended Monthly Split</h2>
<table>
<thead>
<tr><th>Category</th><th>â‚¹ Amount</th></tr>
</thead>
<tbody id="recTable"></tbody>
</table>
</div>

<div class="card">
<h2>ðŸ¤– Smart Tips</h2>
<div class="tip" id="tipsBox">Start tracking to see tips.</div>
</div>

<div class="card">
<button class="danger" onclick="resetAll()">Reset All Data</button>
</div>

</div>

<script>
let state = JSON.parse(localStorage.getItem("cfc")) || {
  income:0,
  expenses:[],
  dark:false
};

function save(){localStorage.setItem("cfc",JSON.stringify(state))}

document.body.classList.toggle("dark",state.dark);

function toggleDark(){
  state.dark=!state.dark;
  document.body.classList.toggle("dark");
  save();
}

function saveIncome(){
  state.income=+income.value;
  save();update();
}

function addExpense(){
  if(amount.value<=0) return;
  state.expenses.push({a:+amount.value,c:category.value});
  amount.value="";
  save();update();
}

function resetAll(){
  if(!confirm("Reset all financial data?"))return;
  state.income=0;
  state.expenses=[];
  save();update();
}

function update(){
  income.value=state.income;
  let spent=state.expenses.reduce((a,b)=>a+b.a,0);
  balance.innerText=state.income-spent;
  daily.innerText=Math.floor((state.income-spent)/30);

  drawChart();
  drawRecommendations();
  generateTips(spent);
}

function drawChart(){
  if(window.chartObj)chartObj.destroy();
  let cats={Food:0,Shopping:0,Entertainment:0};
  state.expenses.forEach(e=>cats[e.c]+=e.a);
  chartObj=new Chart(chart,{
    type:"bar",
    data:{
      labels:Object.keys(cats),
      datasets:[{data:Object.values(cats)}]
    },
    options:{plugins:{legend:{display:false}}}
  });
}

function drawRecommendations(){
  let tbody=document.getElementById("recTable");
  tbody.innerHTML="";
  let split={Food:.4,Shopping:.3,Entertainment:.3};
  for(let k in split){
    let tr=document.createElement("tr");
    tr.innerHTML=`<td>${k}</td><td>â‚¹${Math.round(state.income*split[k])}</td>`;
    tbody.appendChild(tr);
  }
}

function generateTips(spent){
  let box=document.getElementById("tipsBox");
  if(state.income===0){
    box.innerText="Add income to unlock smart tips.";
    return;
  }
  let pct=(spent/state.income)*100;
  if(pct<40) box.innerText="Great control! Consider saving more or investing.";
  else if(pct<70) box.innerText="Balanced spending. Keep tracking daily expenses.";
  else box.innerText="High spending detected. Reduce non-essentials this week.";
}

update();
</script>

</body>
</html>
