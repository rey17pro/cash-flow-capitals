<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CashFlow Compass</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* ---------- THEME VARIABLES ---------- */
:root{
  --primary:#6366f1;
  --accent:#8b5cf6;

  --bg1:#e0f2fe;
  --bg2:#fdf4ff;
  --card:#ffffff;
  --text:#0f172a;
  --shadow:rgba(99,102,241,0.25);
}

body.dark{
  --bg1:#020617;
  --bg2:#020617;
  --card:#0f172a;
  --text:#e5e7eb;
  --shadow:rgba(0,0,0,0.5);
}

/* ---------- BASE ---------- */
body{
  margin:0;
  font-family:Inter,system-ui;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
  transition:0.3s;
}

header{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:white;
  text-align:center;
  padding:26px;
}

.container{
  max-width:540px;
  margin:auto;
  padding:16px;
}

.card{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 14px 32px var(--shadow);
  transition:0.3s;
}

h2{
  margin-bottom:10px;
  font-size:18px;
  background:linear-gradient(135deg,var(--primary),var(--accent));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

input,button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:10px;
  border:2px solid #e5e7eb;
  font-size:14px;
  background:var(--card);
  color:var(--text);
}

button{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:white;
  border:none;
  font-weight:600;
  cursor:pointer;
}

.mode{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.mode div{
  padding:12px;
  border-radius:10px;
  border:2px solid #e5e7eb;
  text-align:center;
  cursor:pointer;
}

.mode .active{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:white;
  border:none;
}

.hidden{display:none}
.small{font-size:13px;opacity:.85}

.result{
  margin-top:12px;
  padding:14px;
  border-radius:14px;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:white;
}

/* ---------- DARK MODE BUTTON ---------- */
.toggle{
  position:fixed;
  right:14px;
  bottom:14px;
  padding:12px 14px;
  border-radius:50%;
  font-size:18px;
}
</style>
</head>

<body>

<header>
<h1>ğŸ’° CashFlow Compass</h1>
<p>Competition-Ready Smart Money Planner</p>
</header>

<button class="toggle" onclick="toggleDark()">ğŸŒ™</button>

<div class="container">

<!-- MODE -->
<div class="card">
<h2>ğŸ¯ Select Planning Mode</h2>
<p class="small">
Regular Mode â†’ monthly budgeting  
Future Mode â†’ long-term goal planning
</p>
<div class="mode">
  <div id="regBtn" onclick="setMode('regular')">Regular Income</div>
  <div id="futBtn" onclick="setMode('future')">Future Planning</div>
</div>
</div>

<!-- REGULAR MODE -->
<div id="regular" class="hidden">

<div class="card">
<h2>ğŸ’µ Monthly Income</h2>
<input id="regIncome" type="number" placeholder="Enter monthly income (â‚¹)">
<button onclick="calculateRegular()">Calculate Budget</button>
</div>

<div class="card">
<h2>ğŸ“Š Monthly Budget Recommendation</h2>
<canvas id="regularChart"></canvas>
<div id="regularText"></div>
</div>

</div>

<!-- FUTURE MODE -->
<div id="future" class="hidden">

<div class="card">
<h2>ğŸ“† Future Money</h2>
<input id="futureMoney" type="number" placeholder="Total money you will have (â‚¹)">
<input id="futureYears" type="number" placeholder="In how many years?">
</div>

<div class="card">
<h2>ğŸ¯ Future Goal</h2>
<input id="goalName" placeholder="Goal (e.g. Laptop)">
<input id="goalCost" type="number" placeholder="Goal cost (â‚¹)">
<button onclick="calculateFuture()">Get Plan</button>
</div>

<div class="card">
<h2>ğŸ“Š Monthly Spending Plan</h2>
<canvas id="futureChart"></canvas>
<div id="futureText"></div>
</div>

</div>

</div>

<script>
let state = JSON.parse(localStorage.getItem("cfc")) || {mode:null,dark:false};
function save(){localStorage.setItem("cfc",JSON.stringify(state));}

/* DARK MODE */
document.body.classList.toggle("dark",state.dark);
function toggleDark(){
  state.dark=!state.dark;
  document.body.classList.toggle("dark");
  save();
}

/* MODE SWITCH */
function setMode(m){
  state.mode=m; save();
  regular.classList.toggle("hidden",m!=="regular");
  future.classList.toggle("hidden",m!=="future");
  regBtn.classList.toggle("active",m==="regular");
  futBtn.classList.toggle("active",m==="future");
}
if(state.mode) setMode(state.mode);

let regChart, futChart;

/* REGULAR MODE */
function calculateRegular(){
  let income=+regIncome.value;
  if(income<=0){alert("Enter valid income");return;}

  let food=income*0.35, shop=income*0.20, ent=income*0.15, saveM=income*0.20, other=income*0.10;

  if(regChart) regChart.destroy();
  regChart=new Chart(regularChart,{
    type:"doughnut",
    data:{
      labels:["Food","Shopping","Entertainment","Savings","Other"],
      datasets:[{
        data:[food,shop,ent,saveM,other],
        backgroundColor:["#22c55e","#3b82f6","#a855f7","#10b981","#f97316"]
      }]
    },
    options:{cutout:"65%",plugins:{legend:{position:"bottom"}}}
  });

  regularText.innerHTML=`
  <div class="result">
    ğŸ’¾ Save monthly: <b>â‚¹${Math.round(saveM)}</b><br>
    ğŸ“… Daily spending limit: <b>â‚¹${Math.round((income-saveM)/30)}</b>
  </div>`;
}

/* FUTURE MODE */
function calculateFuture(){
  let total=+futureMoney.value, years=+futureYears.value, cost=+goalCost.value, name=goalName.value;
  if(total<=0||years<=0||cost<=0||!name){alert("Fill all fields");return;}

  let months=years*12, monthly=total/months, saveM=cost/months, spend=monthly-saveM;
  if(spend<0){futureText.innerHTML="<div class='result'>âš ï¸ Goal not feasible</div>";return;}

  let food=spend*0.40, shop=spend*0.25, ent=spend*0.20, other=spend*0.15;

  if(futChart) futChart.destroy();
  futChart=new Chart(futureChart,{
    type:"doughnut",
    data:{
      labels:["Food","Shopping","Entertainment","Other"],
      datasets:[{
        data:[food,shop,ent,other],
        backgroundColor:["#22c55e","#3b82f6","#a855f7","#f97316"]
      }]
    },
    options:{cutout:"65%",plugins:{legend:{position:"bottom"}}}
  });

  futureText.innerHTML=`
  <div class="result">
    ğŸ¯ ${name}<br>
    ğŸ’¾ Save monthly: <b>â‚¹${Math.round(saveM)}</b><br>
    ğŸ§¾ Spend monthly: <b>â‚¹${Math.round(spend)}</b>
  </div>`;
}
</script>

</body>
</html>
